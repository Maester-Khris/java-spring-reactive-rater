<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" th:href="@{/img/favicon.ico}" type="image/x-icon">
  <title>Authentication page</title>
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link rel="stylesheet" th:href="@{/css/app.css}">
</head>

<body style="background-color: beige;height: 100vh;width: 100%;">
  <div class="wrapper d-flex flex-column" style="padding-bottom: 20px; height: 100vh;">
      <section class="hero-section">
          <div class="hero-content">
              <h1 class="hero-title">Discover & Rank Your Skills</h1>
              <p class="hero-subtitle">
                  Personalize your tech stack. Rate your proficiency, organize your favorites, and track your growth.
              </p>
              <div class="hero-actions" th:switch="${isUserAuthenticated}">
                  <!-- Case: Not logged in -->
                  <a th:case="false" href="/login" class="btn btn-primary hero-btn btn-info auth-btn">
                      <i class="ph-bold ph-user" style="font-size:18px;margin-right: 3px;"></i> Login
                  </a>
                  <!-- Case: Logged in -->
                  <form th:case="true" th:action="@{/logout}" method="post" class="d-inline">
                      <button type="submit" class="btn btn-primary hero-btn btn-info auth-btn"
                              style="background-color: #c17e7e;border-color: #c17e7e;">
                          <i class="ph-bold ph-user" style="font-size:18px;margin-right: 3px;"></i>
                          <span sec:authentication="name"></span>, Logout
                      </button>
                  </form>
                  <!-- Always visible link -->
                  <a href="/votes" class="btn btn-secondary hero-btn">
                      <i class="ph-bold ph-ranking" style="font-size:18px;margin-right: 3px;"></i> Explore Public Ranks
                  </a>
              </div>
          </div>
      </section>
      <section class="login-section-area flex-grow-1 d-flex flex-column justify-content-center">
          <div class="login-form-container">
              <!-- account login -->
              <div class="login-section d-flex justify-content-center">
                      <form action="/login" th:action="@{/login}" method="post">
                      <div class="skill-section-header header-center">
                          <h3>Enter your credentials</h3>
                          <div class="title-border"></div>
                      </div>
                      <div class="form-group">
                          <label for="login-user-name" class="col-form-label">Username: </label>
                          <input name="username" type="text" class="form-control" id="login-user-name" value="guest">
                      </div>
                      <div class="form-group form-passwod-group">
                          <label for="login-user-pass" class="col-form-label">Password: </label>
                          <input name="password" type="password" class="form-control input-password" id="login-user-pass" th:value="${guestpassword}">
                          <i class="ph ph-eye togglePassword" id="" style="float: right;"></i>
                      </div>
                      <small class="form-footer-link">
                          <span>Don't have an account ?</span>
                          <a id="newAccount" href="#createaccount">Create account</a>
                      </small>
                      <button type="submit" class="btn btn-block btn-primary form-btn">Login</button>
                      </form>
                  </div>

              <!-- account signup -->
              <div class="signup-section d-none justify-content-center">
                  <form action="#" th:action="@{/register}" method="post">
                  <div class="skill-section-header header-center">
                      <h3>Create your account here</h3>
                      <div class="title-border"></div>
                  </div>
                  <div class="form-group">
                      <label for="user-name" class="col-form-label">Username: </label>
                      <input name="username" type="text" class="form-control" id="user-name">
                  </div>
                  <div class="form-group">
                      <label for="user-email" class="col-form-label">Email: </label>
                      <input name="email" type="email" class="form-control" id="user-email">
                  </div>
                  <div class="form-group form-passwod-group">
                      <label for="user-pass" class="col-form-label">Password: </label>
                      <input name="password" type="password" class="form-control input-password" id="user-pass">
                      <i class="ph ph-eye togglePassword" id=""></i>
                  </div>
                  <button type="submit" class="btn btn-block btn-primary form-btn">Create my account</button>
                  </form>
              </div>
          </div>
      </section>

      <div id="guestAccessBubble">
          <div class="bubble-icon" title="Guest Login Info">
              <i class="ph-bold ph-info" style="font-size: 20px;"></i>
          </div>
          <div class="bubble-content">
              <p class="content-title">Guest Login ðŸ”‘</p>
              <p class="content-text">
                  For demo access, please use:
              </p>
              <div class="credentials-box">
                  <p><strong>Username:</strong> <span>guest</span></p>
                  <p><strong>Password:</strong> <span th:text="${guestpassword}"></span></p>
              </div>
          </div>
      </div>
  </div>

  <script th:src="@{/js/passvisiblity.js}"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      loginsec = document.querySelector(".login-section");
      signupsec = document.querySelector(".signup-section");
      newaccbtn = document.querySelector("#newAccount");
      newaccbtn.addEventListener("click", function () {
        loginsec.classList.add("hide-modal");
        loginsec.classList.remove("d-flex");
        loginsec.classList.add("d-none");
        setTimeout(()=>{
          signupsec.classList.remove("d-none");
          signupsec.classList.add("d-flex");
          signupsec.classList.add("show-modal");
        },500);
      });       
    });
  </script>
</body>

</html>